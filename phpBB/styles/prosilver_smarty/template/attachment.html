{foreach from=$_file item='__file'}
	{if $__file.S_DENIED}
	<p>[{$__file.DENIED_MESSAGE}]</p>
	{else}

		{if $__file.S_THUMBNAIL}
		<dl class="thumbnail">
			<dt><a href="{$__file.U_DOWNLOAD_LINK}"><img src="{$__file.THUMB_IMAGE}" alt="{$__file.DOWNLOAD_NAME}" title="{$__file.DOWNLOAD_NAME} ({$__file.FILESIZE} {$__file.SIZE_LANG}) {$__file.L_DOWNLOAD_COUNT}" /></a></dt>
			{if $__file.COMMENT}<dd> {$__file.COMMENT}</dd>{/if}
		</dl>
		{/if}


		{if $__file.S_IMAGE}
		<dl class="file">
			<dt class="attach-image"><img src="{$__file.U_INLINE_LINK}" alt="{$__file.DOWNLOAD_NAME}" onclick="viewableArea(this);" /></dt>
			{if $__file.COMMENT}<dd><em>{$__file.COMMENT}</em></dd>{/if}
			<dd>{$__file.DOWNLOAD_NAME} ({$__file.FILESIZE} {$__file.SIZE_LANG}) {$__file.L_DOWNLOAD_COUNT}</dd>
		</dl>
		{/if}

		{if $__file.S__file}
		<dl class="file">
			<dt>{if $__file.UPLOAD_ICON}{$__file.UPLOAD_ICON} {/if}<a class="postlink" href="{$__file.U_DOWNLOAD_LINK}">{$__file.DOWNLOAD_NAME}</a></dt>
			{if $__file.COMMENT}<dd><em>{$__file.COMMENT}</em></dd>{/if}
			<dd>({$__file.FILESIZE} {$__file.SIZE_LANG}) {$__file.L_DOWNLOAD_COUNT}</dd>
		</dl>
		{/if}



		{if $__file.S_WM__file}
			<!-- method used here from http://alistapart.com/articles/byebyeembed / autosizing seems to not work always, this will not fix -->
			<object width="320" height="285" classid="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6" id="wmstream_{$__file.ATTACH_ID}">
				<param name="url" value="{$__file.U_DOWNLOAD_LINK}" />
				<param name="showcontrols" value="1" />
				<param name="showdisplay" value="0" />
				<param name="showstatusbar" value="0" />
				<param name="autosize" value="1" />
				<param name="autostart" value="0" />
				<param name="visible" value="1" />
				<param name="animationstart" value="0" />
				<param name="loop" value="0" />
				<param name="src" value="{$__file.U_DOWNLOAD_LINK}" />
				<!--[if !IE]>-->
					<object width="320" height="285" type="video/x-ms-wmv" data="{$__file.U_DOWNLOAD_LINK}">
						<param name="src" value="{$__file.U_DOWNLOAD_LINK}" />
						<param name="controller" value="1" />
						<param name="showcontrols" value="1" />
						<param name="showdisplay" value="0" />
						<param name="showstatusbar" value="0" />
						<param name="autosize" value="1" />
						<param name="autostart" value="0" />
						<param name="visible" value="1" />
						<param name="animationstart" value="0" />
						<param name="loop" value="0" />
					</object>
				<!--<![endif]-->
			</object>

		{elseif $__file.S_FLASH__file}
			<object classid="clsid:D27CDB6E-AE6D-11CF-96B8-444553540000" codebase="http://active.macromedia.com/flash2/cabs/swflash.cab#version=5,0,0,0" width="{$__file.WIDTH}" height="{$__file.HEIGHT}">
				<param name="movie" value="{$__file.U_VIEW_LINK}" />
				<param name="play" value="true" />
				<param name="loop" value="true" />
				<param name="quality" value="high" />
				<param name="allowScriptAccess" value="never" />
				<param name="allowNetworking" value="internal" />
				<embed src="{$__file.U_VIEW_LINK}" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash" width="{$__file.WIDTH}" height="{$__file.HEIGHT}" play="true" loop="true" quality="high" allowscriptaccess="never" allownetworking="internal"></embed>
			</object>
		{elseif $__file.S_QUICKTIME__file}
			<object id="qtstream_{$__file.ATTACH_ID}" classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0" width="0" height="16">
				<param name="src" value="{$__file.U_DOWNLOAD_LINK}" />
				<param name="controller" value="true" />
				<param name="autoplay" value="false" />
				<param name="type" value="video/quicktime" />
				<embed name="qtstream_{$__file.ATTACH_ID}" src="{$__file.U_DOWNLOAD_LINK}" pluginspage="http://www.apple.com/quicktime/download/" enablejavascript="true" controller="true" width="0" height="16" type="video/quicktime" autoplay="false"></embed>
			</object>
		{elseif $__file.S_RM__file}
			<object id="rmstream_{$__file.ATTACH_ID}" classid="clsid:CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA" width="200" height="50">
				<param name="src" value="{$__file.U_DOWNLOAD_LINK}" />
				<param name="autostart" value="false" />
				<param name="controls" value="ImageWindow" />
				<param name="console" value="ctrls_{$__file.ATTACH_ID}" />
				<param name="prefetch" value="false" />
				<embed name="rmstream_{$__file.ATTACH_ID}" type="audio/x-pn-realaudio-plugin" src="{$__file.U_DOWNLOAD_LINK}" width="0" height="0" autostart="false" controls="ImageWindow" console="ctrls_{$__file.ATTACH_ID}" prefetch="false"></embed>
			</object>
			<br />
			<object id="ctrls_{$__file.ATTACH_ID}" classid="clsid:CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA" width="0" height="36">
				<param name="controls" value="ControlPanel" />
				<param name="console" value="ctrls_{$__file.ATTACH_ID}" />
				<embed name="ctrls_{$__file.ATTACH_ID}" type="audio/x-pn-realaudio-plugin" width="200" height="36" controls="ControlPanel" console="ctrls_{$__file.ATTACH_ID}"></embed>
			</object>

			
			<script type="text/javascript">
			// <![CDATA[
				if (document.rmstream_{$__file.ATTACH_ID}.GetClipWidth)
				{literal}{{/literal}
					while (!document.rmstream_{$__file.ATTACH_ID}.GetClipWidth())
					{literal}{{/literal}
					}

					var width = document.rmstream_{$__file.ATTACH_ID}.GetClipWidth();
					var height = document.rmstream_{$__file.ATTACH_ID}.GetClipHeight();

					document.rmstream_{$__file.ATTACH_ID}.width = width;
					document.rmstream_{$__file.ATTACH_ID}.height = height;
					document.ctrls_{$__file.ATTACH_ID}.width = width;
				}
			// ]]>
			</script>
		{/if}

		{if $__file.S_WM__file or $__file.S_RM__file or $__file.S_FLASH__file or $__file.S_QUICKTIME__file}
			<p>
			{if $__file.S_QUICKTIME__file}<a href="#" onclick="play_qt__file(document.qtstream_{$__file.ATTACH_ID}); return false;">[ {L PLAY_QUICKTIME__file} ]</a> {/if}
			<a href="{$__file.U_DOWNLOAD_LINK}">{$__file.DOWNLOAD_NAME}</a> [ {$__file.FILESIZE} {$__file.SIZE_LANG} | {$__file.L_DOWNLOAD_COUNT} ]</p>
		{/if}

	{/if}
{/foreach}
